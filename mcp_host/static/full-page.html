<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MasterProDev AI Agent</title>
    <link rel="stylesheet" href="/static/full-page.css">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <!-- Three.js for 3D Avatar -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/loaders/GLTFLoader.js": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/loaders/GLTFLoader.js",
            "three/addons/controls/OrbitControls.js": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js"
        }
    }
    </script>
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <div class="chat-header">
            <div class="header-left">
                <div class="logo">
                    <iconify-icon icon="mdi:robot-happy-outline"></iconify-icon>
                </div>
                <span class="header-title">MasterProDev</span>
            </div>
            <div class="header-center">
                <div class="mode-toggle">
                    <button class="mode-btn active" data-mode="text" title="Chat">
                        <iconify-icon icon="mdi:chat-outline"></iconify-icon>
                        <span>Chat</span>
                    </button>
                    <button class="mode-btn" data-mode="voice" title="Voice">
                        <iconify-icon icon="mdi:microphone-outline"></iconify-icon>
                        <span>Voice</span>
                    </button>
                    <button class="mode-btn" data-mode="avatar" title="Avatar">
                        <iconify-icon icon="mdi:face-agent"></iconify-icon>
                        <span>Avatar</span>
                    </button>
                </div>
            </div>
            <div class="header-right">
                <a href="/widget" class="header-icon-btn" title="Open Widget">
                    <iconify-icon icon="mdi:open-in-new"></iconify-icon>
                </a>
                <button class="header-icon-btn" id="header-login" title="Sign in" style="display: none;">
                    <iconify-icon icon="mdi:login-variant"></iconify-icon>
                </button>
                <div class="user-avatar" id="user-menu-btn">
                    <span id="user-info">G</span>
                </div>
                <button class="header-icon-btn" id="header-logout" title="Sign out">
                    <iconify-icon icon="mdi:logout-variant"></iconify-icon>
                </button>
            </div>
        </div>

        <!-- Simple Avatar Container (for voice mode) -->
        <div class="avatar-container" id="avatar-container">
            <div class="avatar" id="avatar">
                <iconify-icon icon="mdi:robot" style="font-size: 32px; color: #00C896;"></iconify-icon>
            </div>
            <div class="avatar-status" id="avatar-status">Ready to listen</div>
        </div>

        <!-- 3D Avatar Container (for avatar mode) -->
        <div class="avatar-3d-container" id="avatar-3d-container">
            <canvas id="avatar-canvas"></canvas>
            <div class="avatar-3d-status" id="avatar-3d-status">Loading 3D Avatar...</div>
        </div>

        <!-- Messages Area -->
        <div class="chat-messages" id="chat-messages">
            <!-- Welcome Message -->
            <div class="message bot">
                <div class="message-avatar">
                    <iconify-icon icon="mdi:robot" style="font-size: 20px; color: #00C896;"></iconify-icon>
                </div>
                <div class="message-content">
                    <p>Hi! I'm your AI assistant. I can help you with:</p>
                    <ul>
                        <li><iconify-icon icon="mdi:calendar" style="color: #00C896;"></iconify-icon> Calendar management</li>
                        <li><iconify-icon icon="mdi:email" style="color: #FFB800;"></iconify-icon> Email operations</li>
                        <li><iconify-icon icon="mdi:file-document" style="color: #2563EB;"></iconify-icon> Document analysis (PDF, Word, Images)</li>
                        <li><iconify-icon icon="mdi:microphone" style="color: #00C896;"></iconify-icon> Voice conversations</li>
                        <li><iconify-icon icon="mdi:lightbulb" style="color: #FFB800;"></iconify-icon> Knowledge queries</li>
                    </ul>
                    <p>How can I help you today?</p>
                    <div class="message-time">Just now</div>
                </div>
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="chat-input-container">
            <!-- File Chip (shown when file attached) -->
            <div class="file-preview" id="file-preview">
                <span class="file-chip-icon" id="file-chip-icon">
                    <iconify-icon icon="mdi:file-document-outline" style="font-size: 20px;"></iconify-icon>
                </span>
                <div class="file-chip-info">
                    <span class="file-chip-name" id="file-name">file.pdf</span>
                    <span class="file-chip-size" id="file-size"></span>
                </div>
                <button class="remove-file" id="remove-file" title="Remove file">âœ•</button>
            </div>

            <!-- Input Row -->
            <div class="input-row">
                <input type="file" id="file-input" accept="audio/*,video/*,image/*,.pdf,.doc,.docx,.pptx,.ppt,.xlsx,.xls,.csv,.rtf,.txt,.md,.json,.xml,.html,.htm,.py,.js,.ts,.jsx,.tsx,.sql,.yaml,.yml" style="display: none;">
                
                <button class="action-btn" id="attach-btn" title="Attach file">
                    <iconify-icon icon="mdi:paperclip" style="font-size: 20px;"></iconify-icon>
                </button>
                
                <button class="action-btn" id="voice-btn" title="Record voice">
                    <iconify-icon icon="mdi:microphone" style="font-size: 20px;"></iconify-icon>
                </button>

                <textarea 
                    id="chat-input" 
                    placeholder="Type your message..."
                    rows="1"
                ></textarea>

                <button class="send-btn" id="send-btn">
                    <iconify-icon icon="mdi:send" style="font-size: 20px;"></iconify-icon>
                </button>
            </div>
        </div>
    </div>

    <script type="module" src="/static/full-page.js"></script>
</body>
</html>
